<!--index.wxml-->
<navigation-bar title="班车预约" back="{{false}}" color="black" background="#FFF"></navigation-bar>

<view class="location-picker">
  <view class="location-display">
    <view class="location-item" bindtap="selectStartPoint">
      <text>始发站</text>
      <text>{{startPoint}}</text>
    </view>
    <view class="location-item" bindtap="selectEndPoint">
      <text>目的地</text>
      <text>{{endPoint}}</text>
    </view>
  </view>
</view>

<view class="date-picker" bindtap="selectDate">
  <text class="date-label">选择时间:</text>
  <text class="selected-date">{{selectedDate}}</text>
</view>

<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 动态班次列表 -->
    <block wx:for="{{schedules}}" wx:key="id">
      <view class="schedule-item">
        <view class="time-area">
          <text>{{item.route_name}} {{item.departure_time}} 发车</text>  <!-- 显示路线名称和发车时间 -->
          <text>到达时间: {{item.arrival_time}}</text>  <!-- 显示到达时间 -->
        </view>
        <view class="seats-area">
          <text>车牌号: {{item.vehicle_plate || '未分配'}}</text>  <!-- 显示车牌号 -->
          <text>司机: {{item.driver_name || '未分配'}}</text>  <!-- 显示司机姓名 -->
        </view>
        <view class="seats-info">
          <text>座位: {{item.available_seats}}/{{item.total_seats}}</text>  <!-- 显示座位信息 -->
        </view>
        <view class="button-area">
          <button size="mini" bindtap="handleSchedule" id="{{item.id}}">{{item.is_booked ? '取消预约' : '预约'}}</button>
        </view>
      </view>
    </block>
  </view>
</scroll-view>
